<div class="flex flex-col bg-app-gray-200 rounded-xl drop-shadow-md animate-appear">
  <form [formGroup]="editApplicationForm">
    <div class="flex flex-row items-center justify-between bg-app-gray-100 p-3 rounded-t-xl">
      <div class="flex items-center bg-app-blue-50 rounded-md shadow-sm p-1">
        <label for="title" class="block rounded-l-md text-sm/6 font-medium text-app-primaryFontColor py-1.5 px-3 bg-app-blue-50 whitespace-nowrap">Titre</label>
        <input id="title" name="title" type="text" formControlName="title" placeholder="{{application.title}}" class="block w-full rounded-r-md border-0 py-1.5 px-3 shadow-sm ring-1 ring-inset ring-app-blue-100 placeholder:text-app-primaryFontColor-400 sm:text-sm/6 text-app-blue-400">
      </div>
      <div class="flex items-center bg-app-blue-50 rounded-md shadow-sm p-1">
        <label for="appliedOn" class="block rounded-l-md text-sm/6 font-medium text-app-primaryFontColor py-1.5 px-3 bg-app-blue-50 whitespace-nowrap">Date</label>
        <input id="appliedOn" name="appliedOn" type="date" placeholder="{{application.appliedOn}}" formControlName="appliedOn" class="block w-full rounded-r-md border-0 py-1.5 px-3 shadow-sm ring-1 ring-inset ring-app-blue-100 placeholder:text-app-primaryFontColor-400 sm:text-sm/6 text-app-blue-400">
      </div>
      <div class="flex items-center bg-app-blue-50 rounded-md shadow-sm p-1">
        <label for="status" class="block rounded-l-md text-sm/6 font-medium text-app-primaryFontColor py-1.5 px-3 bg-app-blue-50">Statut</label>
        <select id="status" name="sector" formControlName="status" required class="block w-full rounded-r-md border-0 py-1.5 px-3 shadow-sm ring-1 ring-inset ring-app-blue-100 placeholder:text-app-primaryFontColor-400 sm:text-sm/6 text-app-blue-400">
          <option [ngValue]= Status.toApply>{{Status.toApply}}</option>
          <option [ngValue]= Status.applied>{{Status.applied}}</option>
          <option [ngValue]= Status.toRelaunch>{{Status.toRelaunch}}</option>
          <option [ngValue]= Status.relaunched>{{Status.relaunched}}</option>
          <option [ngValue]= Status.closed>{{Status.closed}}</option>
        </select>
    </div>
      <div class="flex-col">
        <div class="flex items-center bg-app-blue-50 rounded-md shadow-sm p-1">
          <label for="offerUrl" class="block rounded-l-md text-sm/6 font-medium text-app-primaryFontColor py-1.5 px-3 bg-app-blue-50 whitespace-nowrap">Url de l'offre</label>
          <input id="offerUrl" name="offerUrl" type="text" formControlName="offerUrl" placeholder="{{application.offerUrl}}" class="block w-full rounded-r-md border-0 py-1.5 px-3 shadow-sm ring-1 ring-inset ring-app-blue-100 placeholder:text-app-primaryFontColor-400 sm:text-sm/6 text-app-blue-400">
        </div>
        @if(isInvalidUrl()) {
          <p class="text-xs text-center text-app-red-600">{{urlErrorMessage}}</p>
        }
      </div>
    </div>
    <div class="flex justify-between">
      <div class="flex items-center flex-grow p-1">
        <label for="comments" class="block rounded-l-md text-sm/6 font-medium text-app-primaryFontColor py-1.5 px-3 bg-app-blue-50 whitespace-nowrap">Commentaires</label>
        <input id="comments" name="comments" type="text" formControlName="comments" placeholder="{{application.comments}}" class="block w-full rounded-r-md border-0 py-1.5 px-3 shadow-sm ring-1 ring-inset ring-app-blue-100 placeholder:text-app-primaryFontColor-400 sm:text-sm/6 text-app-blue-400">
      </div>
      <div class="flex justify-end gap-5 p-3">
        <button [disabled]="isInvalidUrl()" (click)=updateApplication(this.application.id!)>
          @if (isInvalidUrl()) {
            <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#6b7280"><path d="M422-297.33 704.67-580l-49.34-48.67L422-395.33l-118-118-48.67 48.66L422-297.33ZM480-80q-82.33 0-155.33-31.5-73-31.5-127.34-85.83Q143-251.67 111.5-324.67T80-480q0-83 31.5-156t85.83-127q54.34-54 127.34-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82.33-31.5 155.33-31.5 73-85.5 127.34Q709-143 636-111.5T480-80Zm0-66.67q139.33 0 236.33-97.33t97-236q0-139.33-97-236.33t-236.33-97q-138.67 0-236 97-97.33 97-97.33 236.33 0 138.67 97.33 236 97.33 97.33 236 97.33ZM480-480Z"/></svg>
          } @else {
            <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#43e588"><path d="M422-297.33 704.67-580l-49.34-48.67L422-395.33l-118-118-48.67 48.66L422-297.33ZM480-80q-82.33 0-155.33-31.5-73-31.5-127.34-85.83Q143-251.67 111.5-324.67T80-480q0-83 31.5-156t85.83-127q54.34-54 127.34-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82.33-31.5 155.33-31.5 73-85.5 127.34Q709-143 636-111.5T480-80Zm0-66.67q139.33 0 236.33-97.33t97-236q0-139.33-97-236.33t-236.33-97q-138.67 0-236 97-97.33 97-97.33 236.33 0 138.67 97.33 236 97.33 97.33 236 97.33ZM480-480Z"/></svg>
          }
        </button>
        <button (click)=closeEditor()>
          <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#f57942"><path d="m332-285.33 148-148 148 148L674.67-332l-148-148 148-148L628-674.67l-148 148-148-148L285.33-628l148 148-148 148L332-285.33ZM480-80q-82.33 0-155.33-31.5-73-31.5-127.34-85.83Q143-251.67 111.5-324.67T80-480q0-83 31.5-156t85.83-127q54.34-54 127.34-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82.33-31.5 155.33-31.5 73-85.5 127.34Q709-143 636-111.5T480-80Zm0-66.67q139.33 0 236.33-97.33t97-236q0-139.33-97-236.33t-236.33-97q-138.67 0-236 97-97.33 97-97.33 236.33 0 138.67 97.33 236 97.33 97.33 236 97.33ZM480-480Z"/></svg>
        </button>
      </div>
    </div>
  </form>
</div>
